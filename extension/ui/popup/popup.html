<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="popup.css" />
    <title>Focus Tutor</title>
  </head>
  <body>
    <main class="container">
      <div class="top-bar">
        <button id="taskListBtn" class="icon-btn" aria-label="Task List" title="View Tasks">
          <span class="task-count" id="taskCount">0</span>
          ğŸ“‹
        </button>
        <button id="settingsBtn" class="icon-btn" aria-label="Settings" title="Settings">âš™ï¸</button>
      </div>

      <!-- Current Task Display -->
      <div id="currentTaskDisplay" class="current-task">
        <div class="task-header">
          <h2 id="currentTaskTitle">No active task</h2>
          <div class="task-actions">
            <button id="addTaskBtn" class="icon-btn-small" title="Add Task">+</button>
          </div>
        </div>
        <div id="progressContainer" class="progress-container" style="display: none;">
          <div class="progress-bar-wrapper">
            <div id="progressBar" class="progress-bar-fill"></div>
          </div>
          <div class="progress-info">
            <span id="progressDetection" class="progress-detection">ğŸ” Analyzing...</span>
            <span id="progressConfidence" class="progress-confidence"></span>
          </div>
          <div class="progress-status">
            <button id="statusNotStarted" class="status-btn" data-status="not-started">Not Started</button>
            <button id="statusOngoing" class="status-btn" data-status="ongoing">Ongoing</button>
            <button id="statusCompleted" class="status-btn" data-status="completed">Completed</button>
          </div>
        </div>
      </div>

      <!-- Add Task Input (hidden by default) -->
      <div id="addTaskPanel" class="panel" style="display: none;">
        <h3>Add New Task</h3>
        <input id="taskInput" type="text" placeholder="What do you want to accomplish?" />
        
        <label>Task Type</label>
        <div class="task-type-selector">
          <button id="typeAssignment" class="task-type-btn active" data-type="assignment">ğŸ“ Assignment</button>
          <button id="typeExam" class="task-type-btn" data-type="exam">ğŸ“ Exam</button>
          <button id="typeEvent" class="task-type-btn" data-type="event">ğŸ“… Event</button>
        </div>
        
        <label for="taskDeadlineDate">Deadline</label>
        <div class="deadline-inputs">
          <input id="taskDeadlineDate" type="date" placeholder="Select date" />
          <input id="taskDeadlineTime" type="time" placeholder="Select time" />
        </div>
        
        <!-- Google Calendar integration - Only works after Chrome Web Store publication -->
        <!-- <div class="calendar-option">
          <label class="checkbox-label">
            <input id="addToCalendar" type="checkbox" />
            <span>ğŸ“… Add to Google Calendar</span>
          </label>
        </div> -->
        
        <button id="saveTaskBtn" class="save-btn">Add Task</button>
      </div>

      <!-- Settings Panel (hidden by default) -->
      <div id="settingsPanel" class="panel" style="display: none;">
        <h3>Settings</h3>
        
        <button id="openDashboardBtn" class="dashboard-btn">ğŸ“Š Open Dashboard</button>
        
        <div class="divider"></div>
        
        <label>Theme</label>
        <div class="theme-selector">
          <button id="lightThemeBtn" class="theme-option">â˜€ï¸ Light</button>
          <button id="darkThemeBtn" class="theme-option">ğŸŒ™ Dark</button>
          <button id="autoThemeBtn" class="theme-option">ğŸŒ— Auto</button>
        </div>
        
        <div class="divider"></div>
        
        <label for="apiBaseUrl">API Base URL</label>
        <input id="apiBaseUrl" type="text" placeholder="http://localhost:5174" />
        <button id="saveApiBaseUrl">Save</button>
        
        <div class="divider"></div>
        
        <h3>Notifications</h3>
        <div class="notification-settings">
          <label class="checkbox-label">
            <input id="enableNotifications" type="checkbox" checked />
            <span>ğŸ”” Enable Notifications</span>
          </label>
          
          <label class="checkbox-label">
            <input id="distractionAlerts" type="checkbox" checked />
            <span>ğŸ¤” Distraction Alerts</span>
          </label>
          
          <label class="checkbox-label">
            <input id="breakReminders" type="checkbox" checked />
            <span>â° Break Reminders</span>
          </label>
          
          <label class="checkbox-label">
            <input id="deadlineReminders" type="checkbox" checked />
            <span>âš ï¸ Deadline Reminders</span>
          </label>
          
          <label class="checkbox-label">
            <input id="taskNudges" type="checkbox" checked />
            <span>ğŸ’¡ Task Nudges</span>
          </label>
          
          <div class="setting-row">
            <label for="focusDuration">Focus Duration (minutes)</label>
            <input id="focusDuration" type="number" min="15" max="120" value="45" />
          </div>
        </div>
        
        <div class="divider"></div>
        
        <h3>Tab Analysis</h3>
        <p id="analysisStatus">Waiting for analysis...</p>
        <p id="analysisScore">Focus score: --</p>
        <p id="analysisMeta">Tabs analyzed: --</p>
        <ul id="analysisList" class="compact-list"></ul>
      </div>

      <!-- Task List Panel (hidden by default) -->
      <div id="taskListPanel" class="panel" style="display: none;">
        <h3>Your Tasks</h3>
        <div id="subtasksContainer">
          <p id="subtasksStatus">No tasks yet</p>
          <ul id="subtasksList" class="task-list"></ul>
        </div>
      </div>
    </main>
    <script type="module" src="popup.js"></script>
  </body>
</html>
